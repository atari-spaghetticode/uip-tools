<!DOCTYPE html>
<html lang="en">
<head>
    <title id='Description'>This page demonstrates how to create three-pane layout using jqxSplitter. </title>
    <link rel="stylesheet" href="../../jqwidgets/jqwidgets/styles/jqx.base.css" type="text/css" />
    <script type="text/javascript" src="../../jqwidgets/scripts/jquery-1.10.2.min.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqwidgets/jqxcore.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqwidgets/jqxsplitter.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqwidgets/jqxbuttons.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqwidgets/jqxscrollbar.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqwidgets/jqxdata.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqwidgets/jqxdatatable.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqwidgets/jqxtreegrid.js"></script>
    <script type="text/javascript" src="../../jqwidgets/jqwidgets/jqxpanel.js"></script>


    <script type="text/javascript">
        $(document).ready(function () {
            $('#mainSplitter').jqxSplitter({ width: '100%', height: '100%', panels: [{ size: '20%' }, { size: '80%'}] });
            $('#rightSplitter').jqxSplitter({ height: '100%', orientation: 'horizontal', panels: [{ size: '60%', collapsible: false }, { size: '20%', collapsible: false }] });
            $("#jqxPanel").jqxPanel({ width: '100%', height: '100%', autoUpdate: true});

      
      
            $('#jqxPanel').jqxPanel({autoUpdate: true});
            $('#jqxPanel').jqxPanel('append', $('treeGrid'));
            
var generateTasks = function (rowsCount) {
    var rowsCount = !rowsCount ? 1 + Math.floor(Math.random() * 5) : rowsCount;
    var data = new Array();
    var generatekey = function () {
        var S4 = function () {
            return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);
        };
        return (S4() + S4() + "-" + S4() + "-" + S4() + "-" + S4() + "-" + S4() + S4() + S4());
    };

    for (var i = 0; i < rowsCount; i++) {
        var row = {};
        var tasks = ["Shopping", "Housewares", "Kitchen supplies", "Groceries", "Cleaning supplies", "Office supplies", "Remodeling", "Paint bedroom", "Paint wall", "Fitness", "Decorate living room",
            "Fix lights", "Fix front door", "Clean kitchen"];
        var firstNames =
        [
            "Andrew", "Nancy", "Shelley", "Regina", "Yoshi", "Antoni", "Mayumi", "Ian", "Peter", "Lars", "Petra", "Martin", "Sven", "Elio", "Beate", "Cheryl", "Michael", "Guylene"
        ];

        var lastNames =
        [
            "Fuller", "Davolio", "Burke", "Murphy", "Nagase", "Saavedra", "Ohno", "Devling", "Wilson", "Peterson", "Winkler", "Bein", "Petersen", "Rossi", "Vileid", "Saylor", "Bjorn", "Nodier"
        ];
        row["id"] = generatekey();
        row["firstname"] = firstNames[Math.floor(Math.random() * firstNames.length)];
        row["lastname"] = lastNames[Math.floor(Math.random() * lastNames.length)];
        row["name"] = row["firstname"] + " " + row["lastname"];
        var taskindex = Math.floor(Math.random() * tasks.length);
        row["task"] = tasks[taskindex];
        row["duration"] = 1+Math.floor(Math.random() * 10);
        data.push(row);
    }
    return data;
}

            $("#treeGrid").jqxTreeGrid(
            {
                width: '100%',
                height: '100%',
                altRows: true,
                virtualModeCreateRecords: function(expandedRecord, done)
                {
                    // expandedRecord is equal to null when the function is initially called, because there is still no record to be expanded.

                    // prepare the data
                    var source =
                    {
                        dataType: "array",
                        dataFields: [
                            { name: "id", type: "string" },
                            { name: "name", type: "string" },
                            { name: "duration", type: "number" },
                            { name: "task", type: "number" }
                        ],
                        localData: expandedRecord === null ? generateTasks(3000) : generateTasks(),
                        id: 'id'
                    }
                    var dataAdapter = new $.jqx.dataAdapter(source, {
                        loadComplete: function () {
                            done(dataAdapter.records);
                        }
                    });
                    dataAdapter.dataBind();
                },
                virtualModeRecordCreating: function(record)
                {
                    if (record.level == 2) {
                        // by setting the record's leaf member to true, you will define the record as a leaf node.
                        record.leaf = true;
                    }
                },
                columns: [
                    { text: 'Name', dataField: "task", align: 'center', width: 250 },
                    { text: 'Size', dataField: "name", cellsAlign: 'center', align: 'center', width: 200 },
                    {
                        text: 'Date', dataField: "duration", cellsAlign: 'center', align: 'center', cellsRenderer: function (row, column, value) {
                            var hour = value > 1 ? " hours" : " hour";
                            return value + hour;
                        }
                    }
                ]
            });
            
            $('#treeGrid').on('rowClick', 
                function (event)
                {
                    $('#rightSplitter').jqxSplitter('refresh');
                });
             

        });
    </script>
    <style type="text/css">
        html, body
        {
            height: 100%;
            width: 100%;
            margin: 0px;
            padding: 0px;
            overflow: hidden;
        }
    </style>
</head>
<body>
    <div id="mainSplitter">
        <div>
            Left Panel</div>
        <div>
            <div id="rightSplitter">
                <div id="jqxPanel">
                    <div id="treeGrid"></div>
                    </div>
                <div>
                    Bottom-Right Panel</div>
            </div>
        </div>
    </div>
</body>
</html>
